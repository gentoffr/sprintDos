import{a as k}from"./chunk-A3DX2TLU.js";import{a as O,b as P}from"./chunk-R2EKE5OG.js";import"./chunk-LJ5XHLMQ.js";import{b as S,g as w,l as M}from"./chunk-JRCBR5DE.js";import{$a as m,Pa as g,Qa as i,Ra as n,Sa as v,U as l,V as p,Ya as C,fb as _,gb as y,hb as r,ib as b,pa as a,qb as x,ua as d,ya as h}from"./chunk-FPBQHEPO.js";import{h as u}from"./chunk-FK42CRUA.js";var E=s=>({seleccionado:s,rojo:!0}),F=s=>({seleccionado:s,azul:!0}),z=class s{constructor(e,o,t,c){this.toast=e;this.router=o;this.authService=t;this.supabaseService=c}currentDegrees=0;aciertos=0;errores=0;userSub;isFlipping=!1;seleccion=null;usuario="Jugador1";seleccionar(e){this.seleccion=e}ngOnInit(){return u(this,null,function*(){this.userSub=this.authService.user$.subscribe(o=>{this.usuario=o});let e=yield this.supabaseService.getCoinflipStats(this.usuario.id);if(!e||e.length===0){this.aciertos=0,this.errores=0;return}this.aciertos=e[0].aciertos,this.errores=e[0].errores,console.log(e)})}onFlipCoin(e){return u(this,null,function*(){if(this.isFlipping)return;if(!this.seleccion){this.toast.info("Selecciona Rojo o Azul antes de tirar la moneda");return}this.isFlipping=!0;let o=Math.floor(Math.random()*4+9);this.currentDegrees+=180*o;let t=this.currentDegrees%360===0?"azul":"rojo";e.style.transform=`translate(-50%, -50%) rotateX(${this.currentDegrees}deg)`,setTimeout(()=>u(this,null,function*(){this.seleccion===t?this.aciertos++:this.errores++,this.isFlipping=!1,this.seleccion=null,yield this.supabaseService.postCoinflip(this.usuario.id,this.aciertos,this.errores)}),5e3),this.isFlipping})}volver(){this.router.navigate(["/home/juegos"])}static \u0275fac=function(o){return new(o||s)(d(k),d(M),d(P),d(O))};static \u0275cmp=h({type:s,selectors:[["app-coinflip"]],decls:24,vars:10,consts:[["coin",""],["routerLink","/home","title","Volver al inicio",1,"volver-home-btn",3,"click"],[2,"font-size","1.5em","vertical-align","middle"],[2,"display","flex","justify-content","center","align-items","flex-start","gap","32px","margin-bottom","24px"],["id","blue",1,"amount",2,"display","flex","flex-direction","column","align-items","center"],[2,"font-size","0.5em","display","block"],[2,"font-size","1em","margin-top","8px","text-align","center"],["id","red",1,"amount",2,"display","flex","flex-direction","column","align-items","center"],["id","coin",3,"click"],["id","front"],["id","back"],[1,"coinflip-botones"],["type","button",3,"click","ngClass"]],template:function(o,t){if(o&1){let c=C();i(0,"button",1),m("click",function(){return l(c),p(t.volver())}),i(1,"span",2),r(2,"\u2190"),n(),r(3,` Home
`),n(),i(4,"div",3)(5,"div",4)(6,"span",5),r(7,"Aciertos"),n(),i(8,"span",6),r(9),n()(),i(10,"div",7)(11,"span",5),r(12,"Errores"),n(),i(13,"span",6),r(14),n()()(),i(15,"div",8,0),m("click",function(){l(c);let j=_(16);return p(t.onFlipCoin(j))}),v(17,"div",9)(18,"div",10),n(),i(19,"div",11)(20,"button",12),m("click",function(){return l(c),p(t.seleccionar("rojo"))}),r(21," Rojo "),n(),i(22,"button",12),m("click",function(){return l(c),p(t.seleccionar("azul"))}),r(23," Azul "),n()()}o&2&&(a(9),b(t.aciertos),a(5),b(t.errores),a(),y("flipping",t.isFlipping),a(5),g("ngClass",x(6,E,t.seleccion==="rojo")),a(2),g("ngClass",x(8,F,t.seleccion==="azul")))},dependencies:[w,S],styles:["button[_ngcontent-%COMP%]{padding:.7em 2em;font-size:1.3em;border-radius:8px;border:none;background:#222;color:#fff;cursor:pointer;box-shadow:0 2px 8px #00000026;transition:background .2s,box-shadow .2s}.volver-home-btn[_ngcontent-%COMP%]{position:absolute;top:24px;left:24px;display:flex;align-items:center;gap:6px;background:linear-gradient(90deg,#818cf8,#6366f1);color:#fff;font-weight:600;padding:8px 18px;border-radius:8px;text-decoration:none;box-shadow:0 2px 8px #6366f11a;transition:background .2s,transform .1s;z-index:10}.volver-home-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#6366f1,#818cf8);transform:translateY(-2px) scale(1.03)}.btn[_ngcontent-%COMP%]:hover{transform:translate(.5em,-.5em);box-shadow:-1em 1em .15em #1018321a}.coinflip-botones[_ngcontent-%COMP%]{position:fixed;left:50%;transform:translate(-50%);top:calc(50% + 140px);display:flex;gap:12px;justify-content:center;z-index:10}button.rojo[_ngcontent-%COMP%]{border:2px solid #d91c5c}button.azul[_ngcontent-%COMP%]{border:2px solid #039de2}button.seleccionado[_ngcontent-%COMP%]{background:linear-gradient(90deg,#d91c5c,#039de2);color:#fff;box-shadow:0 4px 16px #00000040;font-weight:700}body[_ngcontent-%COMP%]{background-color:#14161f;display:flex;justify-content:space-between;font-family:Arial;margin:0;min-height:100vh}.amount[_ngcontent-%COMP%]{margin:30px;font-size:4em}#blue[_ngcontent-%COMP%]{color:#039de2}#red[_ngcontent-%COMP%]{color:#d91c5c}#coin[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:200px;height:200px;perspective:1000px;transition:transform 5s ease,box-shadow .2s ease;transform-style:preserve-3d;background-color:#020b13;box-sizing:border-box;border-radius:50%;box-shadow:0 10px 10px #0003;z-index:20}#coin.flipping[_ngcontent-%COMP%]{box-shadow:0 20px 50px #0003}#coin[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:absolute;inset:0;backface-visibility:hidden;border-radius:50%;margin:16px}#front[_ngcontent-%COMP%]{border:8px solid #039de2;z-index:2}#back[_ngcontent-%COMP%]{border:8px solid #d91c5c;transform:rotateY(180deg)}@media (max-width: 600px){.coinflip-botones[_ngcontent-%COMP%]{top:calc(50% + 180px);gap:8px}}"]})};export{z as CoinflipComponent};
