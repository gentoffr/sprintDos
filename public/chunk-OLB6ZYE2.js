import{a as w,b as k}from"./chunk-R2EKE5OG.js";import"./chunk-LJ5XHLMQ.js";import{d as j,g as S,l as O}from"./chunk-JRCBR5DE.js";import{$a as l,Da as m,Ma as g,Pa as c,Qa as i,Ra as a,Sa as C,U as h,V as b,Ya as y,ab as f,hb as r,ib as _,jb as M,na as v,pa as o,ua as p,ya as x}from"./chunk-FPBQHEPO.js";import{h as u}from"./chunk-FK42CRUA.js";function P(s,e){if(s&1){let t=y();i(0,"div",12)(1,"a",13),l("click",function(){h(t);let d=f();return b(d.iniciarJuego())}),i(2,"span",14),r(3,"\u25B6"),a(),r(4," Iniciar Juego "),a()()}}function A(s,e){if(s&1&&(i(0,"div",15)(1,"p"),r(2),a()()),s&2){let t=f();o(2),_(t.mensaje)}}var I=class s{constructor(e,t,n){this.dbService=e;this.authService=t;this.router=n}barajaId="";cartaActual=null;cartaSiguiente=null;isCardReady=!1;puntaje=0;mensaje="";jugando=!1;usuario="Jugador1";userSub;tiempo=0;intervalo=null;ngOnInit(){this.crearBaraja(),this.userSub=this.authService.user$.subscribe(e=>{this.usuario=e})}crearBaraja(){return u(this,null,function*(){yield fetch("https://deckofcardsapi.com/api/deck/new/shuffle/?deck_count=1").then(e=>e.json()).then(e=>{this.barajaId=e.deck_id,this.iniciarJuego()})})}iniciarJuego(){this.puntaje=0,this.mensaje="",this.jugando=!0,this.isCardReady=!1,this.tiempo=0,this.intervalo&&clearInterval(this.intervalo),this.intervalo=setInterval(()=>{this.tiempo++},1e3),this.obtenerCarta()}terminarJuego(){return u(this,null,function*(){if(this.mensaje+=` Tu puntaje final es ${this.puntaje} en ${this.tiempo} segundos.`,this.jugando=!1,this.isCardReady=!1,this.intervalo&&(clearInterval(this.intervalo),this.intervalo=null),this.usuario&&this.usuario.email)try{yield this.dbService.guardarStatsHiLo({usuario_id:this.usuario.id,puntaje:this.puntaje,tiempo:this.tiempo,fecha:new Date().toISOString()})}catch(e){console.error("Error guardando la partida:",e)}else console.warn("No se pudo guardar la partida: usuario no logueado.")})}obtenerCarta(){return u(this,null,function*(){this.barajaId&&(yield fetch(`https://deckofcardsapi.com/api/deck/${this.barajaId}/draw/?count=1`).then(e=>e.json()).then(e=>{e.cards&&e.cards.length>0?this.cartaActual?(this.cartaSiguiente=e.cards[0],this.isCardReady=!!this.cartaActual&&!!this.cartaSiguiente):(this.cartaActual=e.cards[0],this.obtenerCarta(),this.isCardReady=!!this.cartaActual&&!!this.cartaSiguiente):this.terminarJuego()}))})}convertirValorCarta(e){return e==="KING"?13:e==="QUEEN"?12:e==="JACK"?11:e==="ACE"?1:parseInt(e)}adivinarMayor(){if(!this.jugando||!this.cartaSiguiente||!this.isCardReady)return;let e=this.convertirValorCarta(this.cartaActual.value),t=this.convertirValorCarta(this.cartaSiguiente.value);t>e?(this.puntaje++,this.mensaje="\xA1Correcto!"):t===e?this.mensaje="Las cartas son iguales. No suma punto, pero contin\xFAa.":(this.mensaje="\xA1Incorrecto!",this.terminarJuego()),this.cartaActual=this.cartaSiguiente,this.isCardReady=!1,this.obtenerCarta()}adivinarMenor(){if(!this.jugando||!this.cartaSiguiente||!this.isCardReady)return;let e=this.convertirValorCarta(this.cartaActual.value),t=this.convertirValorCarta(this.cartaSiguiente.value);t<e?(this.puntaje++,this.mensaje="\xA1Correcto!"):t===e?this.mensaje="Las cartas son iguales. No suma punto, pero contin\xFAa.":(this.mensaje="\xA1Incorrecto!",this.terminarJuego()),this.cartaActual=this.cartaSiguiente,this.isCardReady=!1,this.obtenerCarta()}volver(){this.router.navigate(["/home/juegos"])}static \u0275fac=function(t){return new(t||s)(p(w),p(k),p(O))};static \u0275cmp=x({type:s,selectors:[["app-mayor-o-menor"]],decls:22,vars:8,consts:[[1,"juego-mayor-menor"],[1,"titulo-seccion"],["routerLink","/home","title","Volver al inicio",1,"volver-home-btn",3,"click"],[2,"font-size","1.5em","vertical-align","middle"],["class","inicio inicio-arriba",4,"ngIf"],[1,"tiempo"],[1,"contenido-juego"],[1,"carta"],["alt","Carta actual",1,"carta-img",3,"src"],[1,"botones"],[1,"button",3,"click","disabled"],["class","mensaje",4,"ngIf"],[1,"inicio","inicio-arriba"],[1,"btn","btn-modern",3,"click"],[2,"font-size","1.3em","vertical-align","middle"],[1,"mensaje"]],template:function(t,n){t&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),r(3,"Juego: Mayor o Menor"),a()(),i(4,"button",2),l("click",function(){return n.volver()}),i(5,"span",3),r(6,"\u2190"),a(),r(7," Home "),a(),m(8,P,5,0,"div",4),i(9,"p",5),r(10),a(),i(11,"div",6)(12,"div",7),C(13,"img",8),a(),i(14,"div",9)(15,"button",10),l("click",function(){return n.adivinarMayor()}),i(16,"span"),r(17,"Mayor"),a()(),i(18,"button",10),l("click",function(){return n.adivinarMenor()}),i(19,"span"),r(20,"Menor"),a()()(),m(21,A,3,1,"div",11),a()()),t&2&&(o(8),c("ngIf",!n.jugando),o(2),M(" ",n.tiempo," segundos"),o(3),c("src",n.cartaActual?n.cartaActual.image:"",v),o(2),c("disabled",!n.isCardReady),g("aria-disabled",!n.isCardReady),o(3),c("disabled",!n.isCardReady),g("aria-disabled",!n.isCardReady),o(3),c("ngIf",n.mensaje))},dependencies:[S,j],styles:[".inicio-arriba[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:18px;margin-top:0}.btn-modern[_ngcontent-%COMP%]{background:linear-gradient(90deg,#6366f1,#818cf8);color:#fff!important;border:none;border-radius:32px;font-size:1.25em;font-weight:700;padding:.9em 2.2em;box-shadow:0 4px 16px #6366f121;letter-spacing:.08em;text-transform:uppercase;transition:background .2s,transform .1s,box-shadow .2s;outline:none;cursor:pointer;margin:0 auto;display:inline-flex;align-items:center;gap:10px}.btn-modern[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#818cf8,#6366f1);transform:translateY(-2px) scale(1.04);box-shadow:0 8px 24px #6366f12e}.juego-mayor-menor[_ngcontent-%COMP%]{text-align:center;padding:20px}.titulo-seccion[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2em;margin-bottom:30px;color:#1e293b;text-shadow:0 0 5px #709da8}.contenido-juego[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:25px}.carta-img[_ngcontent-%COMP%]{width:200px;height:auto;border-radius:10px;box-shadow:0 8px 16px #0003}.botones[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:center;flex-wrap:wrap}.button[_ngcontent-%COMP%]{background-image:linear-gradient(to top,#f4f1ee,#fff);border-radius:50%;box-shadow:0 8px 10px #0000004d,inset 0 4px 1px 1px #fff,inset 0 -3px 1px 1px #ccc6c580;width:120px;height:120px;display:flex;justify-content:center;align-items:center;font-size:1.2em;font-weight:700;cursor:pointer;transition:all .1s linear;-webkit-user-select:none;user-select:none}.button[_ngcontent-%COMP%]:hover{background-image:linear-gradient(to top,#fff,#f4f1ee);color:#08c}.button[_ngcontent-%COMP%]:active{background-image:linear-gradient(to top,#efedec,#f7f4f4);box-shadow:0 3px 5px #0006,inset 0 -3px 1px 1px #ccc6c580}.button.disabled[_ngcontent-%COMP%]{opacity:.4;pointer-events:none}.button[disabled][_ngcontent-%COMP%], .button[_ngcontent-%COMP%]:disabled{opacity:.4;pointer-events:none;cursor:not-allowed}.mensaje[_ngcontent-%COMP%]{margin-top:20px;font-size:1.5em;color:#fff;font-weight:700}.inicio[_ngcontent-%COMP%]{margin-top:30px}.volver-home-btn[_ngcontent-%COMP%]{position:absolute;top:24px;left:24px;display:flex;align-items:center;gap:6px;background:linear-gradient(90deg,#818cf8,#6366f1);color:#fff;font-weight:600;padding:8px 18px;border-radius:8px;text-decoration:none;box-shadow:0 2px 8px #6366f11a;transition:background .2s,transform .1s;z-index:10}.volver-home-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#6366f1,#818cf8);transform:translateY(-2px) scale(1.03)}.btn[_ngcontent-%COMP%]:hover{transform:translate(.5em,-.5em);box-shadow:-1em 1em .15em #1018321a}.cronometro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2em;font-weight:700;color:#fff;margin-bottom:30px;margin-top:30px}.tiempo[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;color:#1e293b;text-shadow:0 0 5px #000000;margin-top:10px}.cronometro[_ngcontent-%COMP%]{align-items:center;justify-content:center;gap:12px;margin-top:30px;margin-bottom:30px}.reloj-gif[_ngcontent-%COMP%]{width:60px;height:60px;object-fit:contain}"]})};export{I as MayorOMenorComponent};
